{"ast":null,"code":"import request from \"../../utils/request\";\nimport { toast } from \"react-toastify\";\n\n// Get User Profile\nexport function getUserProfile(userId) {\n  return async dispatch => {\n    try {\n      var _JSON$parse;\n      const token = (_JSON$parse = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.get(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setProfile(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Upload Profile Photo\nexport function uploadProfilePhoto(newPhoto) {\n  return async dispatch => {\n    try {\n      var _JSON$parse2;\n      const token = (_JSON$parse2 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.post(`/api/users/profile/profile-photo-upload`, newPhoto, {\n        headers: {\n          Authorization: \"Bearer \" + token,\n          // إضافة الترويسة\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      dispatch(profileActions.setProfilePhoto(data.profilePhoto));\n      toast.success(data.message);\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الصورة الجديدة\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.profilePhoto = data === null || data === void 0 ? void 0 : data.profilePhoto;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Update Profile\nexport function updateProfile(userId, profile) {\n  return async dispatch => {\n    try {\n      var _JSON$parse3;\n      const token = (_JSON$parse3 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse3 === void 0 ? void 0 : _JSON$parse3.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.put(`/api/users/profile/${userId}`, profile, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.updateProfile(data));\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الاسم الجديد\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.username = data === null || data === void 0 ? void 0 : data.username;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Delete Profile (Account)\nexport function deleteProfile(userId) {\n  return async dispatch => {\n    try {\n      var _JSON$parse4;\n      const token = (_JSON$parse4 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse4 === void 0 ? void 0 : _JSON$parse4.token; // الحصول على رمز المصادقة من التخزين المحلي\n      dispatch(profileActions.setLoading());\n      const {\n        data\n      } = await request.delete(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setIsProfileDeleted());\n      toast.success(data === null || data === void 0 ? void 0 : data.message);\n      setTimeout(() => dispatch(profileActions.clearIsProfileDeleted()), 2000);\n    } catch (error) {\n      toast.error(error.response.data.message);\n      dispatch(profileActions.clearLoading());\n    }\n  };\n}\n\n// Get Users Count (for admin dashboard)\nexport function getUsersCount() {\n  return async dispatch => {\n    try {\n      var _JSON$parse5;\n      const token = (_JSON$parse5 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse5 === void 0 ? void 0 : _JSON$parse5.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.get(`/api/users/count`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setUserCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Get All Users Profile (for admin dashboard)\nexport function getAllUsersProfile() {\n  return async dispatch => {\n    try {\n      var _JSON$parse6;\n      const token = (_JSON$parse6 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse6 === void 0 ? void 0 : _JSON$parse6.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.get(`/api/users/profile`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setProfiles(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}","map":{"version":3,"names":["request","toast","getUserProfile","userId","dispatch","_JSON$parse","token","JSON","parse","localStorage","getItem","data","get","headers","Authorization","profileActions","setProfile","error","response","message","uploadProfilePhoto","newPhoto","_JSON$parse2","post","setProfilePhoto","profilePhoto","success","user","setItem","stringify","updateProfile","profile","_JSON$parse3","put","username","deleteProfile","_JSON$parse4","setLoading","delete","setIsProfileDeleted","setTimeout","clearIsProfileDeleted","clearLoading","getUsersCount","_JSON$parse5","setUserCount","getAllUsersProfile","_JSON$parse6","setProfiles"],"sources":["D:/Blog-pro/frontend/src/redux/apiCalls/authApiCall.js"],"sourcesContent":["import request from \"../../utils/request\";\nimport { toast } from \"react-toastify\";\n\n// Get User Profile\nexport function getUserProfile(userId) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.get(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token, // إضافة الترويسة\n        },\n      });\n      dispatch(profileActions.setProfile(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Upload Profile Photo\nexport function uploadProfilePhoto(newPhoto) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.post(\n        `/api/users/profile/profile-photo-upload`,\n        newPhoto,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      );\n\n      dispatch(profileActions.setProfilePhoto(data.profilePhoto));\n      toast.success(data.message);\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الصورة الجديدة\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.profilePhoto = data?.profilePhoto;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Update Profile\nexport function updateProfile(userId, profile) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.put(\n        `/api/users/profile/${userId}`,\n        profile,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.updateProfile(data));\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الاسم الجديد\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.username = data?.username;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Delete Profile (Account)\nexport function deleteProfile(userId) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      dispatch(profileActions.setLoading());\n      const { data } = await request.delete(\n        `/api/users/profile/${userId}`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.setIsProfileDeleted());\n      toast.success(data?.message);\n      setTimeout(() => dispatch(profileActions.clearIsProfileDeleted()), 2000);\n    } catch (error) {\n      toast.error(error.response.data.message);\n      dispatch(profileActions.clearLoading());\n    }\n  };\n}\n\n// Get Users Count (for admin dashboard)\nexport function getUsersCount() {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.get(\n        `/api/users/count`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.setUserCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Get All Users Profile (for admin dashboard)\nexport function getAllUsersProfile() {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.get(\n        `/api/users/profile`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.setProfiles(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}