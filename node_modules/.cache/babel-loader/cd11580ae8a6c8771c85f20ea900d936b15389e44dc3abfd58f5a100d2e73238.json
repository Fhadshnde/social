{"ast":null,"code":"import { profileActions } from \"../slices/profileSlice\";\nimport { authActions } from \"../slices/authSlice\";\nimport request from \"../../utils/request\";\nimport { toast } from \"react-toastify\";\n\n// Get User Profile\nexport function getUserProfile(userId) {\n  return async dispatch => {\n    try {\n      var _JSON$parse;\n      const token = (_JSON$parse = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.get(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setProfile(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Upload Profile Photo\nexport function uploadProfilePhoto(newPhoto) {\n  return async dispatch => {\n    try {\n      var _JSON$parse2;\n      const token = (_JSON$parse2 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.post(`/api/users/profile/profile-photo-upload`, newPhoto, {\n        headers: {\n          Authorization: \"Bearer \" + token,\n          // إضافة الترويسة\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      dispatch(profileActions.setProfilePhoto(data.profilePhoto));\n      dispatch(authActions.setUserPhoto(data.profilePhoto));\n      toast.success(data.message);\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الصورة الجديدة\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.profilePhoto = data === null || data === void 0 ? void 0 : data.profilePhoto;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Update Profile\nexport function updateProfile(userId, profile) {\n  return async dispatch => {\n    try {\n      var _JSON$parse3;\n      const token = (_JSON$parse3 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse3 === void 0 ? void 0 : _JSON$parse3.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.put(`/api/users/profile/${userId}`, profile, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.updateProfile(data));\n      dispatch(authActions.setUsername(data.username));\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الاسم الجديد\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.username = data === null || data === void 0 ? void 0 : data.username;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Delete Profile (Account)\nexport function deleteProfile(userId) {\n  return async dispatch => {\n    try {\n      var _JSON$parse4;\n      const token = (_JSON$parse4 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse4 === void 0 ? void 0 : _JSON$parse4.token; // الحصول على رمز المصادقة من التخزين المحلي\n      dispatch(profileActions.setLoading());\n      const {\n        data\n      } = await request.delete(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setIsProfileDeleted());\n      toast.success(data === null || data === void 0 ? void 0 : data.message);\n      setTimeout(() => dispatch(profileActions.clearIsProfileDeleted()), 2000);\n    } catch (error) {\n      toast.error(error.response.data.message);\n      dispatch(profileActions.clearLoading());\n    }\n  };\n}\n\n// Get Users Count (for admin dashboard)\nexport function getUsersCount() {\n  return async dispatch => {\n    try {\n      var _JSON$parse5;\n      const token = (_JSON$parse5 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse5 === void 0 ? void 0 : _JSON$parse5.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.get(`/api/users/count`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setUserCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Get All Users Profile (for admin dashboard)\nexport function getAllUsersProfile() {\n  return async dispatch => {\n    try {\n      var _JSON$parse6;\n      const token = (_JSON$parse6 = JSON.parse(localStorage.getItem(\"userInfo\"))) === null || _JSON$parse6 === void 0 ? void 0 : _JSON$parse6.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const {\n        data\n      } = await request.get(`/api/users/profile`, {\n        headers: {\n          Authorization: \"Bearer \" + token // إضافة الترويسة\n        }\n      });\n      dispatch(profileActions.setProfiles(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}","map":{"version":3,"names":["profileActions","authActions","request","toast","getUserProfile","userId","dispatch","_JSON$parse","token","JSON","parse","localStorage","getItem","data","get","headers","Authorization","setProfile","error","response","message","uploadProfilePhoto","newPhoto","_JSON$parse2","post","setProfilePhoto","profilePhoto","setUserPhoto","success","user","setItem","stringify","updateProfile","profile","_JSON$parse3","put","setUsername","username","deleteProfile","_JSON$parse4","setLoading","delete","setIsProfileDeleted","setTimeout","clearIsProfileDeleted","clearLoading","getUsersCount","_JSON$parse5","setUserCount","getAllUsersProfile","_JSON$parse6","setProfiles"],"sources":["D:/Blog-pro/frontend/src/redux/apiCalls/profileApiCall.js"],"sourcesContent":["import { profileActions } from \"../slices/profileSlice\";\nimport { authActions } from \"../slices/authSlice\";\nimport request from \"../../utils/request\";\nimport { toast } from \"react-toastify\";\n\n// Get User Profile\nexport function getUserProfile(userId) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.get(`/api/users/profile/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token, // إضافة الترويسة\n        },\n      });\n      dispatch(profileActions.setProfile(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Upload Profile Photo\nexport function uploadProfilePhoto(newPhoto) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.post(\n        `/api/users/profile/profile-photo-upload`,\n        newPhoto,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        }\n      );\n\n      dispatch(profileActions.setProfilePhoto(data.profilePhoto));\n      dispatch(authActions.setUserPhoto(data.profilePhoto));\n      toast.success(data.message);\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الصورة الجديدة\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.profilePhoto = data?.profilePhoto;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Update Profile\nexport function updateProfile(userId, profile) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.put(\n        `/api/users/profile/${userId}`,\n        profile,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.updateProfile(data));\n      dispatch(authActions.setUsername(data.username));\n\n      // تعديل معلومات المستخدم في التخزين المحلي مع الاسم الجديد\n      const user = JSON.parse(localStorage.getItem(\"userInfo\"));\n      user.username = data?.username;\n      localStorage.setItem(\"userInfo\", JSON.stringify(user));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Delete Profile (Account)\nexport function deleteProfile(userId) {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      dispatch(profileActions.setLoading());\n      const { data } = await request.delete(\n        `/api/users/profile/${userId}`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.setIsProfileDeleted());\n      toast.success(data?.message);\n      setTimeout(() => dispatch(profileActions.clearIsProfileDeleted()), 2000);\n    } catch (error) {\n      toast.error(error.response.data.message);\n      dispatch(profileActions.clearLoading());\n    }\n  };\n}\n\n// Get Users Count (for admin dashboard)\nexport function getUsersCount() {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.get(\n        `/api/users/count`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.setUserCount(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n\n// Get All Users Profile (for admin dashboard)\nexport function getAllUsersProfile() {\n  return async (dispatch) => {\n    try {\n      const token = JSON.parse(localStorage.getItem(\"userInfo\"))?.token; // الحصول على رمز المصادقة من التخزين المحلي\n      const { data } = await request.get(\n        `/api/users/profile`,\n        {\n          headers: {\n            Authorization: \"Bearer \" + token, // إضافة الترويسة\n          },\n        }\n      );\n\n      dispatch(profileActions.setProfiles(data));\n    } catch (error) {\n      toast.error(error.response.data.message);\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}